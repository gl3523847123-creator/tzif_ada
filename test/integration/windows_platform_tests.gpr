-- ===========================================================================
-- windows_platform_tests.gpr - Standalone Windows Platform Test
-- ===========================================================================
-- Purpose:
--   Minimal standalone project for Windows CI testing.
--   Does NOT depend on tzif_config.gpr to avoid gnatcoll dependencies.
--   Only builds what's needed for Windows platform validation.
--
-- Tests:
--   - Windows Win32 GetDynamicTimeZoneInformation API
--   - CLDR Windows-to-IANA timezone mapping
-- ===========================================================================

with "functional.gpr";

project Windows_Platform_Tests is

   for Source_Dirs use
     (".",
      "../common",
      "../support",
      "../../src",
      "../../src/domain",
      "../../src/domain/entity",
      "../../src/domain/error",
      "../../src/domain/service",
      "../../src/domain/types",
      "../../src/domain/value_object",
      "../../src/domain/parser",
      "../../src/infrastructure",
      "../../src/infrastructure/platform",
      "../../src/infrastructure/platform/windows",
      "../../src/infrastructure/paths",
      "../../src/infrastructure/ulid",
      "../../src/infrastructure/cache",
      "../../config/profiles/standard");

   --  Note: No Excluded_Source_Files needed - we only include specific
   --  directories that don't contain POSIX-specific code

   for Object_Dir use "../../obj/test/windows_platform";
   for Exec_Dir use "../bin";

   for Main use ("test_windows_platform.adb");

   package Compiler is
      for Default_Switches ("Ada") use
        ("-gnat2022",
         "-gnatwa",
         "-g",
         "-O0");
   end Compiler;

   package Binder is
      for Switches ("Ada") use ("-Es");  -- Symbolic traceback
   end Binder;

   package Builder is
      for Switches ("Ada") use ("-g");  -- Debug symbols
   end Builder;

end Windows_Platform_Tests;
